<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Enroll in Course</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
          rel="stylesheet">
</head>

<body >
<div th:replace="~{fragments/navbar :: navbar}"></div>

<!-- Use layout with content -->
<div th:replace="~{fragments/sidebar :: layout(~{::content})}">
    <div th:fragment="content">
        <div class="container mt-5">

            <h2 class="text-center">Enroll in Course</h2>

            <div class="card shadow mt-4 mx-auto" style="max-width: 600px;">
                <div class="card-body">

                    <h4 th:text="${course.title}"></h4>
                    <p class="text-muted" th:text="'Instructor: ' + ${course.instructor.fullName}"></p>

                    <p th:if="${course.priceType.name() == 'FREE'}">
                        <span class="badge bg-success">FREE COURSE</span>
                    </p>

                    <p th:if="${course.priceType.name() == 'PAID'}">
                        <span class="badge bg-warning text-dark">PAID COURSE</span>
                    </p>

                    <p class="mt-3" th:text="${course.description}"></p>

                    <!-- FREE COURSE -->
                    <form th:if="${course.priceType.name() == 'FREE'}"
                          th:action="@{'/students/course/' + ${course.id} + '/enroll'}" method="post">
                        <button class="btn btn-primary w-100 mt-3">Confirm Enrollment</button>
                    </form>

                    <!-- PAID COURSE -->
                    <form th:if="${course.priceType.name() == 'PAID'}"
                          th:action="@{'/students/course/' + ${course.id} + '/payment'}" method="get">
                        <button class="btn btn-warning w-100 mt-3">Proceed to Payment</button>
                    </form>

                </div>
            </div>

        </div>
    </div>
</div>

</body>
</html>
