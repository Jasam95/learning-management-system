<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Courses</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
          rel="stylesheet">
</head>

<body >

<div th:replace="~{fragments/navbar :: navbar}"></div>

<!-- Use layout with content -->
<div th:replace="~{fragments/sidebar :: layout(~{::content})}">
    <div th:fragment="content">

        <div class="container mt-5">

        <h2 class="mb-4 text-center">All Courses</h2>

        <!-- Success or Error Messages -->
        <div th:if="${param.error}" class="alert alert-danger text-center">
            You must enroll to access the course!
        </div>

        <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
        <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

<!--        <div class="row">-->
<!--            &lt;!&ndash; Loop All Courses &ndash;&gt;-->
<!--            <div class="col-md-4 mb-4" th:each="course : ${courses}">-->
<!--                <div class="card shadow-sm h-100">-->

<!--                    <div class="card-body">-->
<!--                        <h5 class="card-title" th:text="${course.title}"></h5>-->

<!--                        <p class="text-muted mb-1">-->
<!--                            Instructor:-->
<!--                            <span th:text="${course.instructor.fullName}">Instructor Name</span>-->
<!--                        </p>-->

<!--                        <p>-->
<!--                            &lt;!&ndash; Show FREE or PAID Badge &ndash;&gt;-->
<!--                            <span th:if="${course.priceType.name() == 'FREE'}"-->
<!--                                  class="badge bg-success">FREE</span>-->

<!--                            <span th:if="${course.priceType.name() == 'PAID'}"-->
<!--                                  class="badge bg-warning text-dark">PAID</span>-->
<!--                        </p>-->

<!--                        &lt;!&ndash; Description &ndash;&gt;-->
<!--                        <p th:text="${course.description}" class="small"></p>-->

<!--                    </div>-->

<!--                    <div class="card-footer bg-white">-->
<!--                        &lt;!&ndash; If student is already enrolled &ndash;&gt;-->
<!--                        <div th:if="${course.enrolled}">-->
<!--                            <a th:href="@{'/students/course/' + ${course.id} + '/content'}"-->
<!--                               class="btn btn-primary w-100">-->
<!--                                View Course-->
<!--                            </a>-->
<!--                        </div>-->

<!--                        &lt;!&ndash; If student is NOT enrolled &ndash;&gt;-->
<!--                        <div th:if="${not course.enrolled}">-->

<!--                            <form th:action="@{'/students/course/' + ${course.id} + '/enroll-page'}" method="get">-->
<!--                                <button type="submit" class="btn btn-outline-primary w-100">-->
<!--                                    Enroll Now-->
<!--                                </button>-->
<!--                            </form>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->

            <!-- Flex container -->
            <div class="d-flex flex-wrap justify-content-start gap-3">

                <!-- Card -->
                <div class="card shadow-sm"
                     th:each="course : ${courses}"
                     style="flex: 1 1 300px; max-width: 350px;">

                    <div class="card-body">

                        <h5 class="card-title" th:text="${course.title}"></h5>

                        <p class="text-muted mb-1">
                            Instructor:
                            <span th:text="${course.instructor.fullName}">Instructor</span>
                        </p>

                        <p>
                <span th:if="${course.priceType.name() == 'FREE'}"
                      class="badge bg-success">FREE</span>

                            <span th:if="${course.priceType.name() == 'PAID'}"
                                  class="badge bg-warning text-dark">PAID</span>
                        </p>

                        <p class="small" th:text="${course.description}"></p>

                    </div>

                    <div class="card-footer bg-white">

                        <!-- If enrolled -->
                        <div th:if="${course.enrolled}">
                            <a th:href="@{'/students/course/' + ${course.id} + '/content'}"
                               class="btn btn-primary w-100">
                                View Course
                            </a>
                        </div>

                        <!-- If NOT enrolled -->
                        <div th:if="${not course.enrolled}">
                            <form th:action="@{'/students/course/' + ${course.id} + '/enroll-page'}"
                                  method="get">
                                <button type="submit" class="btn btn-outline-primary w-100">
                                    Enroll Now
                                </button>
                            </form>
                        </div>

                    </div>

                </div>

            </div>


            <!-- End each -->
            </div>
        </div>
    </div>




</body>
</html>
